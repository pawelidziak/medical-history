<app-spinner [loading]="loading"></app-spinner>

<section class="section-main" *ngIf="!loading">
  <mat-drawer-container (backdropClick)="hideDrawer ? drawer.close() : null">

    <mat-drawer [disableClose]="true" #drawer [mode]="hideDrawer ? 'over' : 'side'" [opened]="!hideDrawer">
      <button mat-button style="height: 0; position: absolute;"></button> <!-- 'absorbs' the behavior -->

      <div class="drawer-header">
        <div class="wave-bg"></div>

        <div class="header-title">
          <div class="z-index app-name">Medical History</div>
          <button mat-icon-button (click)="logout()">
            <mat-icon class="z-index" aria-label="Logout icon">exit_to_app</mat-icon>
          </button>
        </div>

        <div class="user-info">
          <button mat-raised-button [routerLink]="['/dashboard/profile']">
            <mat-icon aria-label="Account icon">account_circle</mat-icon>
            <span>{{_auth.userName}}</span>
          </button>
        </div>
      </div>

      <div class="drawer-content">
        <app-incident-list [userIncidents]="userIncidents"></app-incident-list>
      </div>

    </mat-drawer>

    <span id="button-menu" *ngIf="hideDrawer" (click)="drawer.toggle()">
    <mat-icon aria-label="Open menu icon">menu</mat-icon>
  </span>

    <div class="my-content">
      <router-outlet></router-outlet>
    </div>

  </mat-drawer-container>

</section>
